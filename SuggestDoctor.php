<?php

function suggest_specialist($text) {
    $text = strtolower($text);

    // Check for greetings first
    $greetings = ['hi', 'hello'];
    $greeting_found = false;
    foreach ($greetings as $greeting) {
        if (strpos($text, $greeting) !== false) {
            $greeting_found = true;
            break;
        }
    }

    if ($greeting_found) {
        return "Hello! Please tell me your symptoms.";
    }

    $keywords = array(
        'Orthodontist' => ['braces', 'overbite', 'underbite', 'straighten teeth', 'invisalign', 'retainer', 'clear aligners', 'orthodontic treatment', 'malocclusion', 'crossbite', 'crowding', 'spacing', 'open bite', 'deep bite', 'palatal expander', 'archwire', 'lingual braces', 'ceramic braces', 'self-ligating braces', 'acceledent', 'propel', 'herbst appliance', 'temporary anchorage devices', 'mini-implants', 'headgear', 'bite turbos', 'bite ramps', 'occlusal adjustment', 'bite plate', 'bite splint', 'night guard', 'space maintainer', 'tooth extraction', 'impacted tooth', 'wisdom teeth removal', 'orthodontic elastics', 'orthodontic separators', 'pericoronal abscess', 'orthodontic emergencies', 'cephalometric analysis', 'cone beam CT', 'digital impressions', 'functional appliances', 'interceptive orthodontics', 'molar uprighting', 'nance appliance', 'non-extraction treatment', 'orthodontic anchorage', 'orthodontic force', 'orthodontic tooth movement', 'phase I orthodontic treatment', 'phase II orthodontic treatment', 'pre-orthodontic treatment', 'reverse pull headgear', 'segmental arch technique', 'serial extraction', 'soft tissue cephalometric analysis', 'space closure', 'temporary anchorage appliances', 'tooth size discrepancy', 'vertical growth pattern', 'edgewise appliance', 'open coil spring', 'self-curing acrylic', 'acrylic removable appliance', 'expansion screw', 'crossbow appliance', 'labial bow', 'labial acrylic splint', 'lingual arch', 'transpalatal arch', 'transverse plane', 'bonding', 'impression material', 'retention', 'relapse', 'overcorrection', 'undercorrection', 'retention appliances', 'V-bend', 'buccal tube', 'interarch elastics', 'occlusion', 'molar relationship', 'surgical orthodontics', 'dentofacial orthopedics', 'fixed appliances', 'clear braces', 'lingual braces cost', 'orthodontic surgery cost', 'dental braces cost', 'damon braces', 'clear aligner therapy', 'six month smiles', 'adult orthodontics', 'child orthodontics', 'invisible braces', 'straight teeth', 'bite correction', 'braces for adults', 'braces for kids', 'crossbite correction', 'overbite correction', 'underbite correction', 'early orthodontic treatment', 'orthodontic retainers', 'orthodontic headgear', 'orthodontic evaluation', 'orthodontic consultation', 'orthodontic appliances', 'dental impressions', 'orthodontic wax', 'orthodontic emergencies', 'orthodontic treatment options', 'esthetic orthodontics'],
        'Dentist' => ['cavity', 'toothache', 'gum', 'teeth cleaning', 'root canal', 'wisdom teeth', 'braces', 'orthodontics', 'dental implants', 'dental crown', 'dental bridge', 'dental bonding', 'veneers', 'teeth whitening', 'halitosis', 'dry mouth', 'gum disease', 'gingivitis', 'periodontitis', 'tooth decay', 'enamel erosion', 'tooth sensitivity', 'dental X-rays', 'dental sealants', 'fluoride treatment', 'oral cancer', 'oral surgery', 'temporomandibular joint disorder (TMJ)', 'oral hygiene', 'dental fillings', 'inlays and onlays', 'sedation dentistry', 'cosmetic dentistry', 'emergency dentistry', 'family dentistry', 'general dentistry', 'pediatric dentistry', 'prosthodontics', 'endodontics', 'periodontics', 'oral pathology', 'dental anxiety', 'dental fear', 'dental phobia', 'dental insurance', 'dental savings plan', 'dental financing', 'smile makeover', 'tooth contouring', 'gum reshaping', 'gingival graft', 'gum graft', 'gum contouring', 'gum lift', 'teeth straightening', 'tooth extraction', 'wisdom tooth extraction', 'dental scaling', 'root planing', 'deep cleaning', 'composite filling', 'amalgam filling', 'porcelain crown', 'metal crown', 'tooth-colored filling', 'dental bridge vs. implant', 'dental implant procedure', 'mini dental implants', 'dental implant cost', 'dental crown cost', 'gum disease treatment', 'periodontal therapy', 'oral surgery cost', 'wisdom teeth removal cost', 'teeth cleaning cost', 'dental bonding cost', 'veneers cost', 'teeth whitening cost', 'halitosis treatment', 'dry mouth treatment', 'oral cancer screening', 'dental X-rays cost', 'dental sealants cost', 'fluoride treatment cost', 'tooth extraction cost', 'toothache treatment', 'dental emergency cost', 'family dentistry cost', 'emergency dentistry cost', 'sedation dentistry cost', 'pediatric dentistry cost', 'oral pathology cost', 'dental anxiety treatment', 'dental fear treatment', 'dental phobia treatment', 'dental insurance cost', 'dental savings plan cost', 'dental financing cost', 'smile makeover cost', 'tooth contouring cost', 'gum reshaping cost', 'gingival graft cost', 'gum graft cost', 'gum contouring cost', 'gum lift cost', 'teeth straightening cost', 'dental scaling cost', 'root planing cost', 'deep cleaning cost', 'composite filling cost', 'amalgam filling cost', 'porcelain crown cost', 'metal crown cost', 'tooth-colored filling cost', 'dental bridge vs. implant cost', 'dental implant procedure cost', 'mini dental implants cost'],
        'Dermatologist' => ['acne', 'rash', 'eczema', 'psoriasis', 'dermatitis', 'skin cancer', 'melanoma', 'wart', 'mole', 'skin tag', 'rosacea', 'hives', 'cold sore', 'shingles', 'scabies', 'lichen planus', 'keloid', 'alopecia', 'vitiligo', 'pruritus', 'urticaria', 'hyperhidrosis', 'actinic keratosis', 'seborrheic keratosis', 'carcinoma', 'basal cell carcinoma', 'squamous cell carcinoma', 'melanocytic nevus', 'seborrheic dermatitis', 'atopic dermatitis', 'contact dermatitis', 'nummular dermatitis', 'stasis dermatitis', 'perioral dermatitis', 'dyshidrotic eczema', 'eczema herpeticum', 'discoid eczema', 'pompholyx eczema', 'lichen simplex chronicus', 'neurodermatitis', 'prurigo nodularis', 'erythroderma', 'ichthyosis', 'pityriasis', 'pityriasis rosea', 'pityriasis alba', 'pityriasis lichenoides', 'lichen nitidus', 'lichen striatus', 'lichen sclerosis', 'lichenoid keratosis', 'pityriasis rubra pilaris', 'porokeratosis', 'keratosis pilaris', 'lichenoid actinic keratosis', 'disseminated superficial actinic porokeratosis', 'actinic reticuloid', 'subacute cutaneous lupus erythematosus', 'chronic cutaneous lupus erythematosus', 'discoid lupus erythematosus', 'systemic lupus erythematosus', 'photosensitivity', 'photosensitive dermatitis', 'phototoxicity', 'photoallergic dermatitis', 'sunburn', 'solar urticaria', 'polymorphous light eruption', 'drug-induced photosensitivity', 'porphyria cutanea tarda', 'xeroderma pigmentosum', 'poikiloderma', 'actinic granuloma', 'chronic actinic dermatitis', 'actinic cheilitis', 'actinic prurigo', 'actinic keratosis', 'actinic keratosis treatment', 'actinic keratosis removal', 'seborrheic dermatitis treatment', 'atopic dermatitis treatment', 'contact dermatitis treatment', 'nummular dermatitis treatment', 'stasis dermatitis treatment', 'perioral dermatitis treatment', 'dyshidrotic eczema treatment', 'eczema herpeticum treatment', 'discoid eczema treatment', 'pompholyx eczema treatment', 'lichen simplex chronicus treatment', 'neurodermatitis treatment', 'prurigo nodularis treatment', 'erythroderma treatment', 'ichthyosis treatment', 'pityriasis treatment', 'pityriasis rosea treatment', 'pityriasis alba treatment', 'pityriasis lichenoides treatment', 'lichen nitidus treatment', 'lichen striatus treatment', 'lichen sclerosis treatment', 'lichenoid keratosis treatment', 'pityriasis rubra pilaris treatment', 'porokeratosis treatment', 'keratosis pilaris treatment', 'lichenoid actinic keratosis treatment', 'disseminated superficial actinic porokeratosis treatment', 'actinic reticuloid treatment', 'subacute cutaneous lupus erythematosus treatment', 'chronic cutaneous lupus erythematosus treatment', 'discoid lupus erythematosus treatment', 'systemic lupus erythematosus treatment', 'photosensitivity treatment', 'photosensitive dermatitis treatment', 'phototoxicity treatment', 'photoallergic dermatitis treatment', 'sunburn treatment', 'solar urticaria treatment', 'polymorphous light eruption treatment', 'drug-induced photosensitivity treatment', 'porphyria cutanea tarda treatment', 'xeroderma pigmentosum treatment', 'poikiloderma treatment', 'actinic granuloma treatment', 'chronic actinic dermatitis treatment', 'actinic cheilitis treatment', 'actinic prurigo treatment'],
        'Surgeon'=> ['surgery', 'operation', 'transplant', 'appendectomy', 'hysterectomy', 'gallbladder', 'anesthesia', 'biopsy', 'blood transfusion', 'bone marrow transplant', 'bowel resection', 'brain surgery', 'breast biopsy', 'carpal tunnel release', 'cataract surgery', 'colectomy', 'colonoscopy', 'coronary artery bypass surgery', 'craniotomy', 'diagnostic laparoscopy', 'endocrine surgery', 'endoscopy', 'esophagectomy', 'exploratory laparotomy', 'fistulotomy', 'gastric bypass surgery', 'general surgery', 'hemorrhoidectomy', 'hernia repair surgery', 'hip replacement surgery', 'hysteroscopy', 'inguinal hernia surgery', 'joint replacement surgery', 'kidney transplant', 'knee replacement surgery', 'laparoscopic cholecystectomy', 'laparoscopy', 'laser eye surgery', 'liver transplant', 'lobectomy', 'lumpectomy', 'mastectomy', 'microdiscectomy', 'Mohs surgery', 'myomectomy', 'neurosurgery', 'open heart surgery', 'orthopedic surgery', 'pancreatic surgery', 'parathyroid surgery', 'partial knee replacement surgery', 'pelvic laparoscopy', 'plastic surgery', 'prostatectomy', 'radical mastectomy', 'radiosurgery', 'rectopexy', 'rhinoplasty', 'robotic surgery', 'rotator cuff surgery', 'salpingectomy', 'sigmoidoscopy', 'sinus surgery', 'skin grafting', 'spinal fusion', 'stomach stapling', 'tendon repair surgery', 'testicular surgery', 'thoracic surgery', 'thrombectomy', 'thyroid surgery', 'tonsillectomy', 'tracheostomy', 'transsphenoidal surgery', 'tubal ligation', 'tummy tuck surgery', 'vagotomy', 'varicocelectomy', 'vasectomy', 'vascular surgery', 'weight loss surgery', 'whipple procedure', 'wisdom teeth removal', 'wound closure', 'xenotransplantation', 'zygomatic arch fracture surgery'],
        'Orthopedic Surgeon'=> ['joint pain', 'arthritis', 'fracture', 'tendon', 'ligament', 'bone', 'jaw', 'leg', 'hands', 'hand', 'skull', 'foot', 'swollen', 'ACL tear', 'ankle sprain', 'bursitis', 'carpal tunnel syndrome', 'cartilage repair', 'cervical spine surgery', 'dislocated shoulder', 'elbow surgery', 'frozen shoulder', 'gait analysis', 'herniated disc', 'hip arthroscopy', 'hip replacement', 'knee arthroscopy', 'knee replacement', 'kyphoplasty', 'laminectomy', 'limb lengthening', 'lumbar spine surgery', 'meniscus tear', 'metatarsalgia', 'neck pain', 'osteoporosis', 'plantar fasciitis', 'rotator cuff tear', 'sciatica', 'scoliosis surgery', 'shoulder impingement syndrome', 'shoulder replacement', 'spinal fusion surgery', 'spinal stenosis', 'sports injuries', 'stress fractures', 'synovial cyst', 'tarsal tunnel syndrome', 'tennis elbow', 'thoracic spine surgery', 'total joint replacement', 'trigger finger', 'ulnar nerve entrapment', 'vertebral compression fracture', 'ACL reconstruction', 'acromioplasty', 'ankle replacement', 'ankle surgery', 'arthrodesis', 'arthroplasty', 'arthroscopic surgery', 'arthrotomy', 'bone grafting', 'bone tumor surgery', 'bunion surgery', 'cervical fusion', 'cervical herniated disc', 'cervical laminectomy', 'cervical spine stenosis', 'clubfoot surgery', 'collarbone surgery', 'decompression surgery', 'deformity correction', 'elbow joint replacement', 'epicondylitis', 'foot and ankle surgery', 'foot surgery', 'fracture repair', 'hand and wrist surgery', 'hand surgery', 'hip arthroplasty', 'hip resurfacing', 'humerus fracture surgery', 'iliac crest bone graft', 'intervertebral disc replacement', 'joint arthroplasty', 'joint replacement revision', 'knee ligament repair', 'knee osteotomy', 'kyphosis correction', 'lateral epicondylitis surgery', 'lumbar discectomy', 'lumbar laminectomy', 'meniscus repair', 'metatarsal surgery', 'minimally invasive spine surgery', 'musculoskeletal tumor surgery', 'neck surgery', 'nerve decompression surgery', 'osteotomy', 'patella realignment', 'pediatric orthopedics', 'pelvic fracture surgery', 'percutaneous discectomy', 'radial head fracture surgery', 'reverse shoulder replacement', 'rotator cuff surgery', 'sacroiliac joint fusion', 'shoulder arthroscopy', 'shoulder labrum surgery', 'spinal cord stimulator', 'spinal disc replacement', 'spinal tumor surgery', 'subacromial decompression', 'subtalar fusion', 'tendinitis', 'thoracic outlet syndrome', 'torn ligament surgery', 'total shoulder replacement', 'trapeziectomy', 'triceps repair', 'tumor excision'],
        'Endocrinologist'=> ['pressure', 'hormon', 'thyroid', 'diabetes', 'adrenal', 'pituitary', 'insulin', 'acromegaly', 'addison disease', 'aldosterone', 'androgen insensitivity syndrome', 'androgen therapy', 'calcitonin', 'cortisol', 'Cushings syndrome', 'DHEA', 'endocrine disruptors', 'endometriosis', 'estrogen therapy', 'exophthalmos', 'fatty liver disease and hormones', 'gestational diabetes', 'glucagon', 'gonadotropins', 'growth hormone', 'hashimoto thyroiditis', 'hirsutism', 'hyperaldosteronism', 'hyperandrogenism', 'hyperglycemia', 'hyperparathyroidism', 'hyperprolactinemia', 'hyperthyroidism', 'hypoglycemia', 'hypoparathyroidism', 'hypopituitarism', 'hypothyroidism', 'insulin resistance', 'insulinoma', 'iodine deficiency', 'Kallmann syndrome', 'Laron syndrome', 'lipid disorders', 'luteinizing hormone', 'male hypogonadism', 'menopause', 'metabolic syndrome', 'multiple endocrine neoplasia', 'neuroendocrine tumors', 'osteoporosis and hormones', 'ovarian failure', 'pancreatic cancer and diabetes', 'pancreatitis and diabetes', 'parathyroid hormone', 'PCOS', 'PMS', 'premenstrual dysphoric disorder', 'primary aldosteronism', 'progesterone therapy', 'prolactinoma', 'propylthiouracil', 'pseudo-Cushing syndrome', 'puberty', 'sex hormone binding globulin', 'sex hormone therapy', 'somatostatinoma', 'testosterone therapy', 'thiazolidinediones', 'thymoma and hypogammaglobulinemia', 'thyroid cancer', 'thyroid hormone resistance', 'thyroid nodules', 'thyroid-stimulating hormone', 'type 1 diabetes', 'type 2 diabetes', 'type 3c diabetes', 'uncontrolled diabetes', 'vitamin D and hormones', 'zona fasciculata', 'zona glomerulosa', 'zona reticularis'],
        'Allergist'=> ['allergy', 'asthma', 'hay fever', 'hives', 'eczema', 'anaphylaxis', 'itching', 'red spots', 'allergic conjunctivitis', 'allergic contact dermatitis', 'alpha-gal allergy', 'animal allergies', 'aspirin allergy', 'atopic march', 'bee sting allergy', 'candida allergy', 'cat allergies', 'celiac disease and allergies', 'chronic sinusitis', 'contact urticaria syndrome', 'dairy allergy', 'dog allergies', 'dust allergies', 'eosinophilic esophagitis', 'exercise-induced anaphylaxis', 'food allergy', 'food intolerance', 'fruit allergy', 'gluten allergy', 'histamine intolerance', 'immunodeficiency', 'insect allergy', 'irritable bowel syndrome and allergies', 'latex allergy', 'mastocytosis', 'milk allergy', 'mold allergies', 'multiple chemical sensitivity', 'nickel allergy', 'nut allergies', 'oral allergy syndrome', 'penicillin allergy', 'perfume allergy', 'pollen allergies', 'post-nasal drip', 'ragweed allergy', 'rhinitis', 'salicylate sensitivity', 'sesame allergy', 'shellfish allergy', 'sinus headaches', 'sneezing', 'soy allergy', 'sun allergy', 'systemic contact dermatitis', 'tobacco smoke allergy', 'toxic epidermal necrolysis', 'tree nut allergy', 'urticarial vasculitis', 'wasp sting allergy', 'wheat allergy', 'alpha-1 antitrypsin deficiency', 'anaphylactoid reaction', 'aquagenic urticaria', 'bariatric surgery and allergies', 'carbapenem allergy', 'cholinergic urticaria', 'cromolyn sodium', 'dental allergies', 'eosinophilic asthma', 'fish allergy', 'foam sclerotherapy', 'gamma globulin therapy', 'gastrointestinal allergies', 'gluten-free diet', 'hereditary angioedema', 'humidifier fever', 'immune system disorders', 'indoor air quality', 'insect sting desensitization', 'leaky gut syndrome', 'lichenoid dermatitis', 'maculopapular rash', 'mucous membrane pemphigoid', 'necrotizing vasculitis', 'night sweats and allergies', 'occupational asthma', 'oral desensitization', 'paraben allergy', 'petroleum allergy', 'photosensitivity', 'pollution allergies', 'porphyria cutanea tarda', 'red meat allergy', 'reduced allergen cat', 'reduced allergen dog', 'seasonal allergies', 'shellac allergy', 'shortness of breath', 'sickle cell trait and allergies', 'sneezing after eating', 'sulfite allergy', 'sweat allergy', 'tanning bed allergy', 'tartrazine allergy', 't-cell lymphoma', 'thunderstorm asthma', 'tongue allergy', 'toothpaste allergy', 'travel allergies'],
        'Internal Medicine Specialist'=> ['infection', 'diagnosis', 'chronic illness', 'health maintenance', 'prevention', 'abdominal pain', 'anemia', 'angina', 'anorexia', 'arterial disease', 'asymptomatic disease', 'atrial fibrillation', 'blood clots', 'blood pressure', 'bronchitis', 'cancer screening', 'cellulitis', 'chest pain', 'cholesterol', 'chronic obstructive pulmonary disease (COPD)', 'cirrhosis', 'coagulation disorders', 'colitis', 'colon cancer screening', 'congestive heart failure', 'connective tissue disease', 'coronary artery disease', 'cough', 'crohns disease', 'dehydration', 'dementia', 'depression', 'diarrhea', 'dizziness', 'dyslipidemia', 'dyspnea', 'edema', 'electrolyte imbalances', 'endocarditis', 'enlarged prostate', 'epilepsy', 'fainting', 'fibromyalgia', 'gallbladder disease', 'gastroesophageal reflux disease (GERD)', 'gastrointestinal bleeding', 'glaucoma', 'gout', 'hearing loss', 'heart attack', 'heart disease', 'hemochromatosis', 'hemorrhoids', 'hepatitis', 'herpes zoster', 'hodgkins lymphoma', 'human papillomavirus (HPV)', 'hypercalcemia', 'hyperkalemia', 'hyperlipidemia', 'hypertension', 'hyperthyroidism', 'hypoglycemia', 'hypothyroidism', 'inflammatory bowel disease (IBD)', 'influenza', 'insomnia', 'irritable bowel syndrome (IBS)', 'jaundice', 'kidney disease', 'lactose intolerance', 'laryngitis', 'liver disease', 'lupus', 'lymphadenopathy', 'lymphoma', 'macular degeneration', 'malaria', 'meningitis', 'migraines', 'multiple sclerosis', 'myocardial infarction', 'nausea', 'neurological disorders', 'obesity', 'osteoporosis', 'pancreatitis', 'peptic ulcer disease', 'pneumonia', 'polycystic ovary syndrome (PCOS)', 'post-traumatic stress disorder (PTSD)', 'prostate cancer screening', 'prostatitis', 'psoriasis', 'pulmonary embolism', 'renal failure', 'rheumatoid arthritis', 'seizures', 'sickle cell anemia', 'sleep apnea', 'stroke', 'substance abuse', 'syncope', 'tachycardia', 'thrombocytopenia', 'thyroid disorders', 'tinnitus', 'tuberculosis', 'ulcerative colitis', 'urinary incontinence', 'urinary tract infection (UTI)', 'varicose veins', 'vascular disease', 'venous insufficiency', 'vertigo'],
        'Anesthesiologist'=> ['anesthesia', 'pain management', 'epidural', 'spinal', 'nerve block', 'sedation', 'airway management', 'analgesia', 'anaphylaxis during anesthesia', 'anesthetic toxicity', 'anesthetic awareness', 'anesthetic complications', 'anesthetic drugs', 'anesthetic gases', 'anesthetic monitoring', 'anesthetic reversal agents', 'anesthetic techniques', 'anesthetic ventilators', 'anesthetics for children', 'anesthetics for elderly patients', 'anesthetics for obese patients', 'anesthetics for pregnant women', 'anesthetics for trauma patients', 'awake craniotomy', 'brachial plexus block', 'bronchoscopy anesthesia', 'burn anesthesia', 'cardiac anesthesia', 'carotid endarterectomy anesthesia', 'cerebral oximetry', 'complex regional pain syndrome', 'conscious sedation', 'continuous epidural anesthesia', 'dental anesthesia', 'depth of anesthesia monitoring', 'dorsal column stimulation', 'dural puncture headache', 'emergence delirium', 'endobronchial ultrasound-guided transbronchial needle aspiration', 'endoscopic anesthesia', 'epidural abscess', 'epidural hematoma', 'general anesthesia', 'glaucoma and anesthesia', 'hernia repair anesthesia', 'inhalational anesthesia', 'intravenous anesthesia', 'knee surgery anesthesia', 'laryngeal mask airway', 'local anesthesia', 'long-acting anesthetics', 'lumbar puncture anesthesia', 'malignant hyperthermia', 'mechanical ventilation', 'monitored anesthesia care', 'myofascial pain syndrome', 'neonatal anesthesia', 'neuraxial anesthesia', 'obstetric anesthesia', 'ophthalmic anesthesia', 'oral surgery anesthesia', 'palliative care', 'pancreatitis and anesthesia', 'paravertebral block', 'patient-controlled analgesia', 'peripheral nerve block', 'pharmacology of anesthesia', 'postoperative delirium', 'postoperative nausea and vomiting', 'preoperative evaluation', 'procedural sedation', 'regional anesthesia', 'renal failure and anesthesia', 'retrobulbar block', 'robotic surgery anesthesia', 'sedation for gastrointestinal endoscopy', 'sedation for magnetic resonance imaging', 'sedation for pediatric patients', 'spinal cord stimulation', 'subarachnoid block', 'superficial cervical plexus block', 'surgical site infections', 'thoracic epidural anesthesia', 'transcutaneous electrical nerve stimulation', 'transesophageal echocardiography', 'trauma anesthesia', 'ultrasound-guided regional anesthesia', 'unanticipated difficult airway', 'vascular surgery anesthesia', 'venous thromboembolism and anesthesia', 'visual evoked potential monitoring', 'volatile anesthetics', 'waking up during anesthesia'],
        'Neurologist'=>['brain', 'spine', 'nerve', 'seizure', 'stroke', 'migraine', 'alzheimer disease', 'amyotrophic lateral sclerosis (ALS)', 'ataxia', 'attention deficit hyperactivity disorder (ADHD)', 'autonomic disorders', 'bell palsy', 'brain aneurysm', 'brain cancer', 'brain injury', 'brain tumor', 'carpal tunnel syndrome', 'cerebral palsy', 'cluster headaches', 'concussion', 'creutzfeldt-jakob disease', 'dementia', 'depression and anxiety', 'diabetic neuropathy', 'dizziness and vertigo', 'dystonia', 'epilepsy', 'essential tremor', 'facial pain', 'fibromyalgia', 'gait disorders', 'gilles de la tourette syndrome', 'guillain-barre syndrome', 'head injury', 'headache', 'huntington disease', 'hydrocephalus', 'infections of the nervous system', 'intracranial hypertension', 'ischemic optic neuropathy', 'labyrinthitis', 'lateral epicondylitis (tennis elbow)', 'lateral medullary syndrome', 'lumbar puncture', 'lyme disease', 'meningitis', 'meningioma', 'mild cognitive impairment', 'moya moya disease', 'multiple sclerosis', 'muscular dystrophy', 'myasthenia gravis', 'myelitis', 'narcolepsy', 'neuralgia', 'neuromuscular disorders', 'neuropathy', 'nightmares', 'optic neuritis', 'parkinsons disease', 'peripheral neuropathy', 'pinched nerve', 'polio', 'post-concussion syndrome', 'post-polio syndrome', 'progressive supranuclear palsy', 'psychogenic movement disorders', 'restless legs syndrome', 'retinal detachment', 'sciatica', 'seizure disorders', 'shingles', 'sleep apnea', 'spinal cord injury', 'spinal stenosis', 'spine fractures', 'spinocerebellar ataxia', 'spondylolisthesis', 'status epilepticus', 'subarachnoid hemorrhage', 'syncope', 'tardive dyskinesia', 'temporal arteritis', 'tension headaches', 'thoracic outlet syndrome', 'tic disorders', 'toxic neuropathy', 'trigeminal neuralgia', 'tuberculosis of the central nervous system', 'tumors of the nervous system', 'unruptured brain aneurysm', 'vascular dementia', 'vasculitis of the central nervous system', 'vesicular stomatitis', 'vestibular neuronitis', 'whiplash'],

        'Physiotherapist'=> ['rehabilitation', 'exercise', 'stretching', 'strengthening', 'mobility', 'injury', 'ankle sprain', 'arthritis', 'back pain', 'balance training', 'carpal tunnel syndrome', 'cerebral palsy', 'chronic obstructive pulmonary disease (COPD)', 'cystic fibrosis', 'deep vein thrombosis (DVT)', 'dizziness and vertigo', 'fibromyalgia', 'fracture', 'gait training', 'hamstring strain', 'head injury', 'hip replacement', 'hydrotherapy', 'joint replacement', 'knee replacement', 'kyphosis', 'ligament sprain', 'low back pain', 'lymphedema', 'multiple sclerosis', 'muscle strain', 'neck pain', 'osteoarthritis', 'osteoporosis', 'overuse injuries', 'parkinson disease', 'patellofemoral syndrome', 'pelvic pain', 'pelvic floor dysfunction', 'plantar fasciitis', 'postoperative rehabilitation', 'postural dysfunction', 'pregnancy-related musculoskeletal disorders', 'prehabilitation', 'quadriceps strain', 'repetitive strain injury', 'respiratory muscle weakness', 'rotator cuff tear', 'running injuries', 'sciatica', 'scoliosis', 'shoulder impingement syndrome', 'shoulder replacement', 'spinal cord injury', 'spinal stenosis', 'sports injuries', 'sprain', 'strain', 'stroke rehabilitation', 'subacromial impingement syndrome', 'tendinitis', 'tennis elbow', 'thoracic outlet syndrome', 'total hip replacement', 'total knee replacement', 'total shoulder replacement', 'torticollis', 'transverse myelitis', 'vertebral compression fracture', 'whiplash-associated disorder', 'workplace injuries', 'wrist fracture', 'yoga therapy'],
        
        'Cardiologist'=> ['heart', 'chest pain', 'blood pressure', 'palpitations', 'irregular heartbeat', 'arrhythmia', 'heart attack', 'heart disease', 'angina', 'atherosclerosis', 'cardiac catheterization', 'cardiac rehab', 'cardiac surgery', 'cardiac stress test', 'cardiovascular disease', 'coronary artery disease', 'congenital heart disease', 'echocardiogram', 'electrocardiogram (EKG/ECG)', 'heart failure', 'heart murmur', 'heart palpitations', 'heart valve disease', 'holter monitor', 'hypertension', 'lipid profile', 'myocardial infarction', 'pacemaker', 'peripheral artery disease', 'peripheral vascular disease', 'stroke', 'thrombosis', 'varicose veins', 'vein disease', 'abdominal aortic aneurysm', 'acute coronary syndrome', 'acute myocardial infarction', 'aortic aneurysm', 'aortic stenosis', 'aortic valve disease', 'aortic valve regurgitation', 'arrhythmogenic right ventricular dysplasia', 'atrial fibrillation', 'atrial septal defect', 'atrioventricular block', 'cardiomegaly', 'cardiomyopathy', 'carotid artery disease', 'congestive heart failure', 'coronary angioplasty', 'coronary artery bypass grafting', 'coronary artery calcification', 'diastolic heart failure', 'dilated cardiomyopathy', 'electrophysiology study', 'endocarditis', 'heart block', 'heart palpitations at night', 'heart transplantation', 'heart valve replacement', 'hypertrophic cardiomyopathy', 'idiopathic dilated cardiomyopathy', 'idiopathic hypertrophic subaortic stenosis', 'infective endocarditis', 'left bundle branch block', 'left ventricular hypertrophy', 'long QT syndrome', 'mitral regurgitation', 'mitral stenosis', 'mitral valve prolapse', 'myocarditis', 'orthostatic hypotension', 'palpitations after eating', 'patent foramen ovale', 'pericarditis', 'pulmonary edema', 'pulmonary embolism', 'raynauds disease', 'restless leg syndrome and heart disease', 'sick sinus syndrome', 'sudden cardiac arrest', 'supraventricular tachycardia', 'syncope', 'tachycardia', 'transient ischemic attack', 'tricuspid regurgitation', 'valvular heart disease', 'ventricular fibrillation', 'ventricular septal defect', 'ventricular tachycardia', 'Wolff-Parkinson-White syndrome'],
    );

    $specialist_scores = array();

    foreach ($keywords as $specialty => $words) {
        $specialist_scores[$specialty] = 0;

        foreach ($words as $word) {
            // Using preg_match to find exact matches
            if (preg_match('/\b' . preg_quote($word, '/') . '\b/', $text)) {
                $specialist_scores[$specialty]++;
            }
        }
    }

    // Sort the specialist scores in descending order
    arsort($specialist_scores);

    return $specialist_scores;
}

// Example usage:
//$text = "I have a toothache and need a dentist.";
//$suggested_specialists = suggest_specialist($text);
//foreach ($suggested_specialists as $specialty => $score) {
   // echo "$specialty: $score\n";

?>

<!DOCTYPE html>
<html lang="en" style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Specialist Chatbot</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/fc9938d86d.js"></script>
</head>
<body style="min-height: 100%; margin-bottom: 0; padding-bottom: 50px; background-color: #1A3D6A;">
    <div style="padding-top: 70px;">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="text-center text-light mb-4">Doctor Specialist Chatbot</h1>
                    <p class="text-center text-light">Welcome to the Doctor Specialist Chatbot. Our AI chatbot is designed to help you find the right specialist for your medical needs. Simply type in your question or concern, and the chatbot will provide you with a recommendation.</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8 offset-md-2">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-center">Ask the Chatbot</h5>
                            <p class="card-text">Please tell me your symptoms below:</p>
                            <form method="post">
                                <input type="hidden" name="csrf_token" value="<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>">
                                <!-- Assuming $_SESSION['csrf_token'] contains a valid CSRF token -->
                                <textarea name="question" class="form-control" rows="3"></textarea>
                                <button type="submit" class="btn btn-success mt-2 mb-3">Ask</button>
                            </form>
                            <?php 
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $text = $_POST["question"];
    $suggested_specialists = suggest_specialist($text);
    if (!empty($suggested_specialists)) {
        $highest_specialty = '';
        $highest_score = -1;
        foreach ($suggested_specialists as $specialty => $score) {
            if ($score > $highest_score) {
                $highest_specialty = $specialty;
                $highest_score = $score;
            }
        }
        if ($highest_score > 0) {
            echo "<p>ChatBot: The suggested specialist based on your input is: $highest_specialty </p>";
           
        } else {
            echo "<p>ChatBot: No suggested specialists found based on your input.</p>";
        }
    } else {
        echo "<p>ChatBot: No suggested specialists found based on your input.</p>";
    }
}
?>
                            <a href="index.php" class="btn btn-primary btn-sm">Back to Home</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-md-12">
                    <p class="text-center text-light">Our chatbot utilizes advanced AI algorithms to analyze your input and provide you with the most accurate specialist recommendation. From cardiologists to dermatologists, we cover a wide range of medical specialties to help you find the best care possible.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
